/**
 * 加密配置示例文件
 *
 * 使用方法：
 * 1. 复制此文件为 encryption-config.json
 * 2. 根据选择的加密模式填写配置
 * 3. 将文件移动到 ~/.codebuddy/ 目录
 *
 * 安全提示：
 * - 请妥善保管您的加密密钥
 * - 密钥丢失后无法恢复云端数据
 * - 建议定期导出密钥备份
 */

{
  /**
   * 加密模式
   *
   * 可选值：
   * - "auto": 使用 API Key 自动派生密钥 (推荐多设备用户)
   * - "password": 使用用户密码派生密钥 (单设备用户)
   */
  "mode": "auto",

  /**
   * 当 mode = "auto" 时，需要提供 API Key
   *
   * API Key 是 Base64 编码的 256 位随机密钥
   * 生成方法：
   * 1. 首次配置时系统会自动生成
   * 2. 或使用 /export-key 导出现有密钥
   * 3. 导入时使用 /import-key <base64-key>
   */
  "apiKey": "base64-encoded-api-key-here",

  /**
   * 当 mode = "password" 时的配置
   */
  "password": {
    /**
     * 密码提示 (可选)
     * 用于帮助您记住密码
     * 注意：这不是密码本身，只是一个提示
     */
    "hint": "your-password-hint-here",

    /**
     * 密码盐 (Base64 编码)
     * 首次使用密码时会自动生成
     * 请妥善保存，更换盐值会导致无法解密旧数据
     */
    "salt": "base64-salt-here"
  },

  /**
   * 加密算法配置
   * 通常不需要修改
   */
  "algorithm": {
    /**
     * 加密算法
     * AES-256-GCM 提供认证加密
     */
    "name": "aes-256-gcm",

    /**
     * 密钥派生函数
     */
    "kdf": "pbkdf2",

    /**
     * PBKDF2 迭代次数
     * 更多迭代次数 = 更高安全性，但速度更慢
     */
    "iterations": 100000,

    /**
     * PBKDF2 哈希算法
     */
    "hash": "sha256",

    /**
     * 初始化向量长度 (字节)
     * GCM 推荐 12 字节
     */
    "ivLength": 12,

    /**
     * 认证标签长度 (字节)
     * GCM 推荐 16 字节
     */
    "tagLength": 16
  },

  /**
   * 密钥轮换配置 (可选)
   */
  "rotation": {
    /**
     * 是否启用自动密钥轮换
     * 注意：启用后会定期生成新密钥并重新加密所有会话
     */
    "enabled": false,

    /**
     * 轮换间隔 (天数)
     */
    "intervalDays": 90,

    /**
     * 保留旧密钥的天数
     * 用于解密旧会话
     */
    "gracePeriodDays": 7
  }
}
